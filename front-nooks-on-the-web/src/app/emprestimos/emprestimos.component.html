<div class="link-home">
  <a routerLink="/">← Voltar para a Tela Inicial</a>
</div>

<div class="emprestimos-container">
  <h1>Gestão de Empréstimos</h1>

  <div *ngIf="mensagemErro" class="alert alert-danger">{{ mensagemErro }}</div>
  <div *ngIf="mensagemSucesso" class="alert alert-success">{{ mensagemSucesso }}</div>

  <form (submit)="emprestar()">
    <h2>Novo Empréstimo</h2>
    <label for="idUsuario">ID do Usuário:</label>
    <input id="idUsuario" [(ngModel)]="novoEmprestimo.idUsuario" name="idUsuario" required />

    <label for="idLivro">ID do Livro:</label>
    <input id="idLivro" [(ngModel)]="novoEmprestimo.idLivro" name="idLivro" required />

    <label for="dataDevolucao">Data de Devolução:</label>
    <input id="dataDevolucao" type="datetime-local" [(ngModel)]="novoEmprestimo.dataDevolucao" name="dataDevolucao" required />

    <button type="submit">Emprestar</button>
  </form>

  <h2>Lista de Empréstimos</h2>
  <ul>
    <li *ngFor="let emprestimo of emprestimos">
      Livro: {{ emprestimo.livro.titulo }} - Usuário: {{ emprestimo.idUsuario }}
      <br />
      Data de Devolução: {{ emprestimo.dataDevolucao | date:'short' }}
      <br />
      Status: {{ emprestimo.devolvido ? 'Devolvido' : 'Pendente' }}
      <button (click)="devolver(emprestimo.id)" [disabled]="emprestimo.devolvido">Devolver</button>
    </li>
  </ul>
</div>
